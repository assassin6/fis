define(function(e,n,o){var i=e("ms"),a=e("http://res.wx.qq.com/open/js/jweixin-1.2.0.js");return{appId:null,isWeixin:function(){var e=window.navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)},authLink:function(e){if(!this.isWeixin())return void i.alert("请在用微信打开此页面");var n="";if(validator.isNull(e.link))return void i.alert("授权链接不能为空(link)");if(validator.isNull(e.appId))return void i.alert("微信appId不能为空(link)");void 0!=e.state&&(n=e.state);var o=encodeURIComponent(i.base+"/mweixin/oauth/login.do?url="+encodeURIComponent(e.link)+"&appId="+e.appId);return"https://open.weixin.qq.com/connect/oauth2/authorize?appid="+e.appId+"&redirect_uri="+o+"&response_type=code&scope=snsapi_userinfo&state="+n+"#wechat_redirect"},share:function(e){a.ready(function(){a.onMenuShareAppMessage(e),a.onMenuShareTimeline(e),a.onMenuShareQQ(e),a.onMenuShareWeibo(e)})},config:function(e){return validator.isNull(e.appId)?void i.alert("微信appId不能为空(link)"):void $.get(i.base+"/mweixin/weixin/config.do",{appId:e.appId,url:location.href.split("#")[0]},function(e){a.config({debug:!1,appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","translateVoice","startRecord","stopRecord","onRecordEnd","playVoice","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"]})})}}});