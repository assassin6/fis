define(function(r,a,i){var t=r("ms"),l={type:"post",dataType:"json"};return{brand:{list:function(r,a){if(validator.isNull(r))l.params=r;else{if(!validator.isInt(r))return void t.alert("商品分类必须为整型");l.params="categoryCategoryId="+r}l.url=t.base+"/mall/brand/list.do",t.ajax(l,a)}},specification:{list:function(r,a,i){function e(r){this.productSpecs={};for(var a in r.productSpecs){var i=r.productSpecs[a],t=i.specName;this.productSpecs[t]||(this.productSpecs[t]=[]),this.productSpecs[t].push(i)}for(var l in this.productSpecs){var e=this.productSpecs[l],o=u.clone();u.after(o);var s=o.find("*[data-specs='ms-specs-key']");s.text(l);var d=o.find("*[data-specs='ms-specs-value']");d.attr("data-specs-key",l);for(var a in e){var n=d.clone(!0);d.after(n);var v=n.find("*[data-specs='ms-specs-img']");""!=e[a].img?v.attr("src",e[a].img):v.hide();var c=n.find("*[data-specs='ms-specs-text']");c.text(e[a].specValue)}d.remove()}u.remove()}function o(r){for(var a in r){var i=r[a],t=i.specValues,l={},e=t.split(",");for(var o in e){var s=e[o],d=s.split(":"),n=d[0],u=d[1];l[n]=u}i.specValues=l}return r}function s(r,a,t){var l={},e=r.find("*[data-specs='ms-specs-value']"),o=e.find("*[data-specs='ms-specs-text']"),s=$("body").find("*[data-specs='ms-specs-price']"),n=s.text(),u=$("body").find("*[data-specs='ms-specs-stock']"),v=u.text();e.click(function(){var r=$(this).attr("data-specs-key"),e=$(this).find(o).text();if($(this).hasClass(a))$(this).removeClass(a),delete l[r],s.length>0&&s.text(n),u.length>0&&u.text(v);else{$(this).siblings().removeClass(a),$(this).addClass(a),l[r]=e;for(var c in t)d(t[c].specValues,l)&&(null!=i&&void 0!=i&&i(t[c]),s.text(t[c].price),u.text(t[c].stock))}})}function d(r,a){var i=n(r),t=n(a);if(i!=t)return!1;for(var l in r)if(r[l]!=a[l])return!1;return!0}function n(r){var a=0;for(var i in r)a++;return a}if(validator.isNull(""+r))t.alert("商品id不能为空");else if(!validator.isInt(r))return void t.alert("商品id必须为整型");g_container=$("body");var u=g_container.find("*[data-specs='ms-specs-area']");u.find("*[data-specs='ms-specs-key']").text("规格"),u.find("*[data-specs='ms-specs-text']").text("加载中..."),l.url=t.base+"/mall/productSpecification/"+r+"/list.do",l.params=r,t.ajax(l,function(r){e(r);var i=o(r.productSpecDetails);s(g_container,a,i)})},queryByCategoryId:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.categoryId))return void t.alert("商品分类ID不能为空");l.url=t.base+"/mall/specification/queryByCategoryId.do",l.params=r,t.ajax(l,a)}},detail:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.detailId))return void t.alert("商品规格编号不能为空");if(!validator.isInt(i.detailId))return void t.alert("商品规格编号必须为整形");l.url=t.base+"/mall/specificationDetail/"+r+"/get.do",l.params=r,t.ajax(l,a)}}},mall:{search:function(r,a){return validator.isNull(r)?void t.alert("必须存在一个搜索条件"):(l.url=t.base+"/mmall/search.do",l.params=r,void t.ajax(l,a))}},product:{search:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.category)&&validator.isNull(i.brand))return void t.alert("商品分类id和品牌id必须存在一个");l.url=t.base+"/mall/product/search.do",l.params=r,t.ajax(l,a)}},getEntity:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.productId))return void t.alert("商品编号不能为空");if(!validator.isInt(i.productId))return void t.alert("商品编号必须为整形");l.url=t.base+"/mall/product/"+r+"/getEntity.do",l.params=r,t.ajax(l,a)}},getOthersPurchase:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.productId))return void t.alert("商品分类id不能为空");l.url=t.base+"/mall/product/getOthersPurchase.do",l.params=r,t.ajax(l,a)}}},comment:{list:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.commentBasicId))return void t.alert("商品编号不能为空");if(!validator.isInt(i.commentBasicId))return void t.alert("商品编号应该为整形");l.url=t.base+"/mall/orderComment/list.do",l.params=r,t.ajax(l,a)}},summar:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.commentBasicId))return void t.alert("商品编号不能为空");if(!validator.isInt(i.commentBasicId))return void t.alert("商品编号应该为整形");l.url=t.base+"/mall/orderComment/summar.do",l.params=r,t.ajax(l,a)}}},impression:{get:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.piBasicId))return void t.alert("商品编号不能为空");if(!validator.isInt(i.piBasicId))return void t.alert("商品编号必须为整数");if(validator.isNull(i.piId))return void t.alert("印象自增长编号不能为空");if(!validator.isInt(i.piId))return void t.alert("印象自增长编号必须为整数");l.url=t.base+"/mall/productImpression/get.do",l.params=r,t.ajax(l,a)}}},people:{mall:{attention:{save:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.basicAttentionBasicId))return void t.alert("商品编号不能为空");if(!validator.isInt(i.basicAttentionBasicId))return void t.alert("商品编号应该为整型");if(validator.isNull(i.basicAttentionType))return void t.alert("关注类型不能为空");l.url=t.base+"/people/attention/save.do",l.params=r,t.ajax(l,a)}},isExists:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.basicAttentionBasicId))return void t.alert("商品编号不能为空");if(!validator.isInt(i.basicAttentionBasicId))return void t.alert("商品编号为整型");if(validator.isNull(i.basicAttentionType))return void t.alert("关注类型不能为空");l.url=t.base+"/people/attention/isExists.do",l.params=r,t.ajax(l,a)}},del:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.basicId))return void t.alert("basicId不能为空");var e=new Array,o=0;e=i.basicId.split(",");for(var s=0;s<i.basicId.length;s++)","===i.basicId[s]&&o++;if(o>=e.length)return void t.alert("输入参数格式有误");l.url=t.base+"/people/attention/delete.do",l.params=r,t.ajax(l,a)}},list:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.basicAttentionType))return void t.alert("列表的类型不能为空");if(validator.isNull(i.pageNo))return void t.alert("页码不能为空");if(!validator.isInt(i.pageNo))return void t.alert("页码应为整型");if(validator.isNull(i.pageSize))return void t.alert("分页数量不能为空");if(!validator.isInt(i.pageSize))return void t.alert("分页数量应为整型");l.url=t.base+"/people/mall/attention/list.do",l.params=r,t.ajax(l,a)}}},cart:{list:function(r,a){l.url=t.base+"/people/mall/order/cart/list.do",l.params=r,t.ajax(l,a)},save:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.cartBasicId))return void t.alert("信息编号不能为空");if(!validator.isInt(i.cartBasicId))return void t.alert("信息编号必须为整型");if(validator.isNull(i.cartNum))return void t.alert("商品数量不能为空");if(!validator.isInt(i.cartNum))return void t.alert("商品数量必须为整型");l.url=t.base+"/people/mall/order/cart/save.do",l.params=r,t.ajax(l,a)}},del:function(r,a){if(validator.isNull(r))return void t.alert("购物车编号不能为空");var i=t.turnJson(r);if(validator.isNull(i.cartIds))return void t.alert("购物车编号不能为空");var e=new Array,o=0;e=i.cartIds.split(",");for(var s=0;s<i.cartIds.length;s++)","===i.cartIds[s]&&o++;return o>=e.length?void t.alert("输入参数格式有误"):(l.url=t.base+"/people/mall/order/cart/delete.do",l.params=r,void t.ajax(l,a))},update:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.cartId))return void t.alert("购物车编号不能为空");if(!validator.isInt(i.cartId))return void t.alert("购物车编号必须为整型");if(validator.isNull(i.cartBasicId))return void t.alert("信息编号不能为空");if(!validator.isInt(i.cartBasicId))return void t.alert("信息编号必须为整型");if(validator.isNull(i.cartNum))return void t.alert("商品数量不能为空");if(!validator.isInt(i.cartNum))return void t.alert("商品数量必须为整型");l.url=t.base+"/people/mall/order/cart/update.do",l.params=r,t.ajax(l,a)}}},order:{detail:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.orderNo))return void t.alert("订单号不能为空");if(!validator.isInt(i.orderNo))return void t.alert("订单号应为整型");l.url=t.base+"/people/mall/order/detail.do",l.params=r,t.ajax(l,a)}},del:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.orderNo))return void t.alert("订单号不能为空");if(!validator.isInt(i.orderNo))return void t.alert("订单号必须为整数");l.url=t.base+"/people/order/delete.do",l.params=r,t.ajax(l,a)}},submit:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.orderUserName))return void t.alert("收货人姓名不能为空");if(validator.isNull(i.orderPhone))return void t.alert("联系电话不能为空");if(!validator.isMobilePhone(i.orderPhone,"zh-CN"))return void t.alert("请输入正确的电话");if(validator.isNull(i.orderAddress))return void t.alert("收货地址不能为空");if(validator.isNull(i.orderExpress))return void t.alert("快递方式不能为空");if(validator.isNull(i.orderPayment))return void t.alert("支付方式不能为空");if(validator.isNull(i.orderStatus))return void t.alert("订单状态不能为空");if(validator.isNull(i.cartIds))return void t.alert("购物车编号不能为空");var e=new Array,o=0;e=i.cartIds.split(",");for(var s=0;s<i.cartIds.length;s++)","===i.cartIds[s]&&o++;if(o>=e.length)return void t.alert("输入参数格式有误");l.url=t.base+"/people/mall/order/submit.do",l.params=r,t.ajax(l,a)}},confirm:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.orderNo))return void t.alert("订单号不能为空");if(!validator.isInt(i.orderNo))return void t.alert("订单号应为整型");l.url=t.base+"/people/mall/order/confirm.do",l.params=r,t.ajax(l,a)}},close:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.orderNo))return void t.alert("订单号不能为空");if(!validator.isInt(i.orderNo))return void t.alert("订单号应为整型");l.url=t.base+"/people/order/close.do",l.params=r,t.ajax(l,a)}},info:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.cartId))return void t.alert("购物车编号不能为空");l.url=t.base+"/people/order/info.do",l.params=r,t.ajax(l,a)}},list:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.orderStatus)&&validator.isNull(i.orderExpress)&&validator.isNull(i.orderPayment))return void t.alert("订单状态，配送方式，支付方式中至少有一个不为空");if(!validator.isNull(i.orderStatus)&&!validator.isInt(i.orderStatus))return void t.alert("订单状态为整型");if(!validator.isNull(i.orderExpress)&&!validator.isInt(i.orderExpress))return void t.alert("配送方式为整型");if(!validator.isNull(i.orderPayment)&&!validator.isInt(i.orderPayment))return void t.alert("支付方式为整型");l.url=t.base+"/people/mall/order/list.do",l.params=r,t.ajax(l,a)}}},comment:{del:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.ocCommentId))return void t.alert("评论编号不能为空");if(!validator.isInt(i.ocCommentId))return void t.alert("评论编号应该为整形");var e=new Array,o=0;e=i.ocCommentId.split(",");for(var s=0;s<i.ocCommentId.length;s++)","===i.ocCommentId[s]&&o++;if(o>=e.length)return void t.alert("输入参数格式有误");l.url=t.base+"/people/mall/orderComment/delete.do",l.params=r,t.ajax(l,a)}},list:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.commentBasicId))return void t.alert("商品编号不能为空");if(!validator.isInt(i.commentBasicId))return void t.alert("商品编号应该为整形");l.url=t.base+"/people/mall/orderComment/list.do",l.params=r,t.ajax(l,a)}},save:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.commentBasicId))return void t.alert("商品编号不能为空");if(!validator.isInt(i.commentBasicId))return void t.alert("商品编号应该为整形");if(validator.isNull(i.ocOrderId))return void t.alert("订单编号不能为空");if(validator.isNull(i.commentContent))return void t.alert("评论内容不能为空");if(validator.isNull(i.ocImpression))return void t.alert("印象不能为空");if(validator.isNull(i.ocProduct))return void t.alert("商品符合度不能为空");if(validator.isNull(i.ocService))return void t.alert("店家服务态度不能为空");if(validator.isNull(i.ocLogistics))return void t.alert("物流发货速度不能为空");if(validator.isNull(i.ocServiceDescribe))return void t.alert("评价服务不能为空");l.url=t.base+"/people/mall/orderComment/save.do",l.params=r,t.ajax(l,a)}},update:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.ocImpression))return void t.alert("印象不能为空");if(validator.isNull(i.ocProduct))return void t.alert("商品符合度不能为空");if(validator.isNull(i.ocService))return void t.alert("店家服务态度不能为空");if(validator.isNull(i.ocLogistics))return void t.alert("物流发货速度不能为空");if(validator.isNull(i.ocServiceDescribe))return void t.alert("评价服务不能为空");l.url=t.base+"/people/mall/orderComment/update.do",l.params=r,t.ajax(l,a)}}},impression:{get:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.piBasicId))return void t.alert("商品编号不能为空");if(!validator.isInt(i.piBasicId))return void t.alert("商品编号必须为整数");if(validator.isNull(i.piId))return void t.alert("印象自增长编号不能为空");if(!validator.isInt(i.piId))return void t.alert("印象自增长编号必须为整数");l.url=t.base+"/people/mall/productImpression/get.do",l.params=r,t.ajax(l,a)}},save:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.piBasicId))return void t.alert("商品编号不能为空");if(!validator.isInt(i.piBasicId))return void t.alert("商品编号必须为整数");if(validator.isNull(i.piTitle))return void t.alert("印象不能为空");l.url=t.base+"/people/mall/productImpression/save.do",l.params=r,t.ajax(l,a)}},del:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.piId))return void t.alert("印象编号不能为空");if(!validator.isInt(i.cartBasicId))return void t.alert("印象编号必须为整型");l.url=t.base+"/people/mall/productImpression/delete.do",l.params=r,t.ajax(l,a)}},update:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.piBasicId))return void t.alert("商品编号不能为空");if(!validator.isInt(i.piBasicId))return void t.alert("商品编号必须为整型");if(validator.isNull(i.piTitle))return void t.alert("印象不能为空");l.url=t.base+"/people/mall/productImpression/update.do",l.params=r,t.ajax(l,a)}},list:function(r,a){if(!validator.isNull(r)){var i=t.turnJson(r);if(validator.isNull(i.piBasicId))return void t.alert("商品编号不能为空");if(!validator.isInt(i.piBasicId))return void t.alert("商品编号必须为整数");l.url=t.base+"/people/mall/productImpression/list.do",l.params=r,t.ajax(l,a)}}}}}}});